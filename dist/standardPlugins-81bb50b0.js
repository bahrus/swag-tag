import{i as isTemplate,g as getProp,a as copyCtx,b as doNextStepSelect,e as doNextStepSibling,f as processEl,h as processSymbols,r as restoreCtx,j as transform}from"./swag-tag-5ddf449b.js";export{k as templStampPlugin,t as templStampSym}from"./swag-tag-5ddf449b.js";function doTransform(e,t){const o=copyCtx(e);e.Transform=t;const n=Object.keys(t);if(0!==n.length){const t=n[0][0];let s="SNTM".indexOf(t)>-1;e.previousTransform=o.Transform,s?(doNextStepSelect(e),doNextStepSibling(e)):(e.target=e.target.firstElementChild,e.level++,e.idx=0,processEl(e),processSymbols(e)),delete e.previousTransform}restoreCtx(e,o)}function doObjectMatch(e,t,o){if(Array.isArray(t))doArrayMatch(e,t,o);else{if(isTemplate(t))return void doTemplate(o,t);doTransform(o,t)}}function bulkTransfer(e,t){Array.from(e.childNodes).forEach(e=>{t.appendChild(e)})}const twm=Symbol();function doTemplate(e,t){const o=e.target,n=void 0!==t.dataset.shadowRoot;let s=o;const r=t.content.cloneNode(!0);if(n)null===o.shadowRoot?o.attachShadow({mode:t.dataset.shadowRoot,delegatesFocus:!0}):o.shadowRoot.innerHTML="",s=o.shadowRoot,s.appendChild(r);else{const e=Array.from(r.querySelectorAll("slot"));if(e.length>0)e.forEach(e=>{let t=e;if(t.hasAttribute("as-template")){const o=document.createElement("template");t.insertAdjacentElement("afterend",o),t=o,e.remove()}const n=e.name;if(n){const e=o.querySelector(`[slot="${n}"]`);null!==e&&bulkTransfer(e,t)}else bulkTransfer(o,t)}),o.innerHTML="",o.appendChild(r);else{const e=Array.from(o.querySelectorAll("template-content")),n=o;void 0===n[twm]&&(n[twm]=new WeakMap);const s=n[twm],r=s.get(t);if(e.forEach(e=>{void 0===r||e!==r?(e.style.display="none",e.removeAttribute("part")):void 0!==r&&e===r&&(r.style.display="block",e.setAttribute("part","content"))}),void 0===r){const e=document.createElement("template-content");e.style.display="block",e.setAttribute("part","content");const n=t.content.cloneNode(!0);e.appendChild(n),s.set(t,e),o.appendChild(e)}}}}function doArrayMatch(e,t,o){const n=t[0];switch(typeof n){case"undefined":return;case"object":Array.isArray(n)?doRepeat(e,t,o):doPropSetting(e,t,o);break;case"boolean":doCondition(e,t,o);break;case"symbol":o.plugins[n].fn(o,t);break;case"string":const s=o.target,r=t[1];let a;if(void 0!==r)"replace"===r?s.localName!==n&&(a=document.createElement(n),s.getAttributeNames().forEach(e=>{a.setAttribute(e,s.getAttribute(e))}),s.childNodes.forEach(e=>{a.append(e)}),s.dataset.deleteMe="true",s.insertAdjacentElement("afterend",a)):(a=document.createElement(n),s.insertAdjacentElement(r,a));else{const e=document.createElement(n);s.appendChild(e)}const i=t[2];void 0!==i&&void 0!==a&&(o.target=a,doPropSetting(e,i,o),o.target=s)}}function doCondition(e,t,o){const[n,s,r,a]=t,i=n?s:a;if(void 0!==i&&o.target.appendChild(i.content.cloneNode(!0)),void 0!==r){const e=o.host||o;void 0!==r.yesSym&&(n?e[r.yesSym]=o.target:delete e[r.yesSym]),void 0!==r.noSym&&(n?delete e[r.noSym]:e[r.noSym]=o.target),void 0!==r.eitherSym&&(e[r.eitherSym]=o.target)}}function doPropSetting(e,t,o){const n=t.length,s=o.target;if(n>0){{const e=t[0];if(void 0!==e){const t=Object.assign({},e);delete t.dataset,delete t.style,Object.assign(s,t),void 0!==e.style&&Object.assign(s.style,e.style),void 0!==e.dataset&&Object.assign(s.dataset,e.dataset)}}if(n>1){if(void 0!==t[1]){const e=t[1];for(const t in e){let n=e[t];if(Array.isArray(n)){const e=n[1].split("."),t=n[2],s=void 0!==o.host?n[0].bind(o.host):n[0];n=o=>{let n=getProp(o.target,e);void 0!==t&&(n=t(n)),s(n,o)}}else void 0!==o.host&&(n=n.bind(o.host));s.addEventListener(t,n)}}if(n>2){if(void 0!==t[2])for(const e in t[2]){const o=t[2][e];switch(typeof o){case"boolean":o?s.setAttribute(e,""):s.removeAttribute(e);break;case"string":s.setAttribute(e,o);break;case"number":s.setAttribute(e,o.toString());break;case"object":null===o&&s.removeAttribute(e)}}n>3&&(void 0!==t[3]&&doTransform(o,t[3]),n>4&&void 0!==t[4]&&((o.host||o.cache)[t[4]]=s))}}}}function doRepeat(e,t,o){o.mode,o.mode;const n=o.viewModel;o.viewModel=t[0];o.repeatProcessor(t[1],o,t[0],o.target,t[3],t[4]);o.viewModel=n}const countKey=Symbol.for("04efa75f-dec8-4002-a091-153683691bd1"),itemsKey=Symbol.for("bb247496-9c5d-459c-8127-fe80fee8c256"),idxKey=Symbol.for("ad7cf100-0c10-4184-b836-f560f2c15c81"),ubKey=Symbol.for("7c6fd3aa-eea3-478c-b18c-32132b1bfc7c");function repeatInit(e,t,o,n,s){const r=o.length;n[countKey]=r,n[ubKey]=r;const a=Object.assign({},t);a.Transform="symbol"==typeof s?a[s]:s;for(let t=0;t<r;t++){const s=o[t];a.item=s,a.idx=t,a.itemTagger=e=>{e[idxKey]=t,e[itemsKey]=s},isTemplate(e)?transform(e,a,n):renderDynamicContent(e,a,n)}}function renderDynamicContent(e,t,o){switch(typeof e){case"string":const n=document.createElement(e);o.appendChild(n);const s=Object.assign({},t);s.target=n,"function"==typeof s.Transform&&(s.Transform=s.Transform(s)),processEl(s);break;case"object":transform(e,t,o);break;case"function":renderDynamicContent(e(t),t,o)}}const origStyleKey=Symbol("origStyle");function repeatethUpdateth(e,t,o,n,s){const r=n[countKey],a=o.length,i=n[ubKey];console.log(n.dataset);const c=a-r,l=Object.assign({},t);l.Transform="symbol"==typeof s?t[s]:s;for(let e=0;e<Math.max(r,a);e++){const t=o[e];l.item=t,l.idx=e;const s=n.children[e];l.target=s,"function"==typeof l.Transform?l.Transform(l):processEl(l)}if(c>0){for(let t=0;t<c;t++){const s=t+r,a=o[s];if(l.item=a,l.idx=s,t+r<i){const e=n.children[t+r];e.style.display=e[origStyleKey]}else l.itemTagger=e=>{e[idxKey]=s,e[itemsKey]=a},isTemplate(e)?transform(e,l,n):renderDynamicContent(e,l,n)}n[ubKey]=r+c}else for(let e=n.children.length-1;e>-1;e--){const t=n.children[e];t[idxKey]>=a&&(t[origStyleKey]=t.style.display,t.style.display="none")}n[countKey]=a}const initialized=Symbol();function repeateth(e,t,o,n,s,r=s){void 0!==n[initialized]?repeatethUpdateth(e,t,o,n,r):(repeatInit(e,t,o,n,s),n[initialized]=!0)}const sk=Symbol("sk");function interpolate(e,t,o,n=!1){let s=e[sk];if(void 0===s){s=(n?e.getAttribute(t):e[t]).split("|"),e[sk]=s.map(e=>{const t=e.split("??");return 1===t.length?t[0]:t})}const r=e[sk].map((e,t)=>{const n=Array.isArray(e),s=n?e[0]:e;if("."===s[0]){const t=o[s.substr(1).trim()];return n&&null==t?e[1]:t}return t%2==1?"|"+s+"|":s}).join("");n?e.setAttribute(t,r):e[t]=r}const interpolateSym=Symbol.for("+QWTsLO6pUq7e0dxjginwg");function fromTuple(e,t){let o=t[2];if(Array.isArray(o))o=getProp(e,o);else switch(typeof t[2]){case"function":o=o(e,t)}interpolate(e.target,t[1],o,t[3])}const plugin={fn:fromTuple,sym:interpolateSym};export{doObjectMatch,plugin as interpolatePlugin,interpolateSym,repeateth};