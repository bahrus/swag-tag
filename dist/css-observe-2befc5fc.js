function hydrate(t){return class extends t{constructor(){super(...arguments),this.__conn=!1}attr(t,e,s){if(void 0===e)return this.getAttribute(t);if(!this.__conn)return void 0===this.__attribQueue&&(this.__attribQueue=[]),void this.__attribQueue.push({name:t,val:e,trueVal:s});this[(e?"set":"remove")+"Attribute"](t,s||e)}__propUp(t){const e=this.constructor.defaultValues;t.forEach(t=>{let s=this[t];void 0===s&&void 0!==e&&(s=e[t]),this.hasOwnProperty(t)&&delete this[t],void 0!==s&&(this[t]=s)})}connectedCallback(){this.__conn=!0;const t=this.constructor.props;this.__propUp([...t.bool,...t.str,...t.num,...t.obj]),void 0!==this.__attribQueue&&(this.__attribQueue.forEach(t=>{this.attr(t.name,t.val,t.trueVal)}),this.__attribQueue=void 0)}}}const debounce=(t,e)=>{let s;return function(){const functionCall=()=>t.apply(this,arguments);clearTimeout(s),s=setTimeout(functionCall,e)}};function XtallatX(t){var e;return(e=class extends t{constructor(){super(...arguments),this.__evCount={},this.self=this,this._xlConnected=!1,this.__propActionQueue=new Set}static get evalPath(){return lispToCamel(this.is)}static get observedAttributes(){const t=this.props;return[...t.bool,...t.num,...t.str,...t.jsonProp].map(t=>camelToLisp(t))}static get props(){if(void 0===this.is)return{};if(void 0===this[this.evalPath]){const t=deconstruct(this.attributeProps),e={};t.forEach(t=>{e[t]=t}),this[this.evalPath]=this.attributeProps(e);const s=this[this.evalPath];propCategories.forEach(t=>{s[t]=s[t]||[]})}let t=this[this.evalPath];const e=Object.getPrototypeOf(this).props;return void 0!==e&&(t=mergeProps(t,e)),t}__to$(t){const e=t%2;return(t-e)/2+"-"+e}__incAttr(t){const e=this.__evCount;t in e?e[t]++:e[t]=0,this.attr("data-"+t,this.__to$(e[t]))}onPropsChange(t){let e=!1;const s=this.constructor[propInfoSym];if(Array.isArray(t))t.forEach(t=>{this.__propActionQueue.add(t);const o=s[t];void 0!==o&&o.async&&(e=!0)});else{this.__propActionQueue.add(t);const o=s[t];void 0!==o&&o.async&&(e=!0)}!this.disabled&&this._xlConnected&&(this.disabled||(e?this.__processActionDebouncer():this.__processActionQueue()))}attributeChangedCallback(t,e,s){this[atrInit]=!0;const o=this[ignoreAttrKey];if(void 0!==o&&!0===o[t])return void delete o[t];const n=lispToCamel(t),i="_"+n,r=this,c=this.constructor.props;if(c.str.includes(n))r[i]=s;else if(c.bool.includes(n))r[i]=null!==s;else if(c.num.includes(n))r[i]=parseFloat(s);else if(c.jsonProp.includes(n))try{r[i]=JSON.parse(s)}catch(t){r[i]=s}this.onPropsChange(n)}connectedCallback(){super.connectedCallback(),this._xlConnected=!0,this.__processActionDebouncer(),this.onPropsChange("")}[de](t,e,s=!1){if(this.disabled)return;const o=t+(s?"":"-changed");let n=!1,i=!1,r=!1;if(void 0!==this.eventScopes){const t=this.eventScopes.find(t=>void 0===t[0]||t[0].startsWith(o));void 0!==t&&(n="bubbles"===t[1],r="cancelable"===t[2],i="composed"===t[3])}const c=new CustomEvent(o,{detail:e,bubbles:n,composed:i,cancelable:r});return this.dispatchEvent(c),this.__incAttr(o),c}get __processActionDebouncer(){return void 0===this.___processActionDebouncer&&(this.___processActionDebouncer=debounce((t=!1)=>{this.__processActionQueue()},16)),this.___processActionDebouncer}__processActionQueue(){if(void 0===this.propActions)return;const t=this.__propActionQueue;this.__propActionQueue=new Set,this.propActions.forEach(e=>{const s=deconstruct(e),o=new Set(s);intersection(t,o).size>0&&e(this)})}}).attributeProps=({disabled:t})=>({bool:[t]}),e}const ignoreAttrKey=Symbol(),propInfoSym=Symbol("propInfo"),atrInit=Symbol("atrInit");function define(t){const e=t.is;let s=0,o=!1,n=!1,i=e;do{s>0&&(i=`${e}-${s}`);const r=customElements.get(i);void 0!==r?r===t&&(o=!0,t.isReally=i):(n=!0,t.isReally=i,o=!0),s++}while(!o);if(!n)return;const r=t.props,c=t.prototype,a=[...r.bool,...r.num,...r.str,...r.obj],l=Object.getOwnPropertyNames(c);t[propInfoSym]={},a.forEach(e=>{if(l.includes(e))return;const s="_"+e,o={};propCategories.forEach(t=>{o[t]=r[t].includes(e)}),t[propInfoSym][e]=o,Object.defineProperty(c,e,{get(){return this[s]},set(o){const n=t[propInfoSym][e];if(n.dry&&o===this[s])return;const i=camelToLisp(e);if(n.reflect){if(void 0===this[atrInit]&&this.hasAttribute(i))return;void 0===this[ignoreAttrKey]&&(this[ignoreAttrKey]={}),this[ignoreAttrKey][i]=!0,n.bool?o&&!this.hasAttribute(i)||!1===o?this.attr(i,o,""):this[ignoreAttrKey][i]=!1:n.str?this.attr(i,o):n.num?this.attr(i,o.toString()):n.obj&&this.attr(i,JSON.stringify(o))}this[s]=o,n.log&&console.log(n,o),n.debug,this.onPropsChange(e),n.notify&&this[de](i,{value:o})},enumerable:!0,configurable:!0})}),customElements.define(i,t)}const de=Symbol.for("1f462044-3fe5-4fa8-9d26-c4165be15551");function mergeProps(t,e){const s={};return propCategories.forEach(o=>{s[o]=(t[o]||[]).concat(e[o]||[])}),s}function intersection(t,e){let s=new Set;for(let o of e)t.has(o)&&s.add(o);return s}const ltcRe=/(\-\w)/g;function lispToCamel(t){return t.replace(ltcRe,(function(t){return t[1].toUpperCase()}))}const ctlRe=/[\w]([A-Z])/g;function camelToLisp(t){return t.replace(ctlRe,(function(t){return t[0]+"-"+t[1]})).toLowerCase()}const propCategories=["bool","str","num","reflect","notify","obj","jsonProp","dry","log","debug","async"],argList=Symbol("argList");function deconstruct(t){if(void 0===t[argList]){const e=t.toString().trim();if(e.startsWith("({")){const s=e.indexOf("})",2);t[argList]=e.substring(2,s).split(",").map(t=>t.trim())}else t[argList]=[]}return t[argList]}const eventNames=["animationstart","MSAnimationStart","webkitAnimationStart"];function addCSSListener(t,e,s,o,n=""){void 0===e._boundInsertListeners&&(e._boundInsertListeners={});const i=e._boundInsertListeners;if(void 0!==i[s])return;const r=`\n        @keyframes ${t} {\n            from {\n                opacity: 0.99;\n            }\n            to {\n                opacity: 1;\n            }\n        }\n\n        ${s}{\n            animation-duration: 0.001s;\n            animation-name: ${t};\n        }\n\n        ${n}`,c=document.createElement("style");c.innerHTML=r,e._host=e.getRootNode(),9===e._host.nodeType&&(e._host=document.firstElementChild);const a="html"!==e._host.localName;a?e._host.appendChild(c):document.head.appendChild(c),i[s]=o.bind(e);const l=a?e._host:document;eventNames.forEach(t=>{l.addEventListener(t,i[s],!1)})}function observeCssSelector(t){return class extends t{addCSSListener(t,e,s,o=""){addCSSListener(t,this,e,s,o)}disconnect(){if(this._boundInsertListener){const t="html"!==this._host.localName?this._host:document;eventNames.forEach(e=>{t.removeEventListener(e,this._boundInsertListener)})}}disconnectedCallback(){this.disconnect(),void 0!==super.disconnectedCallback&&super.disconnectedCallback()}}}const linkInsertListener=({disabled:t,observe:e,selector:s,self:o,customStyles:n})=>{o.disconnect(),!t&&e&&o.isConnected&&void 0!==s&&(""===o.id&&(o.id=CssObserve.is+(new Date).valueOf()),o.addCSSListener(o.id,s,o.insertListener,n))},linkClosestContainer=({withinClosest:t,self:e})=>{void 0===t?delete e.closestContainer:(e.closestContainer=e.closest(t),null===e.closestContainer&&console.warn("Could not locate closest container."))},linkLatestMatch=({latestOuterMatch:t,closestContainer:e,self:s})=>{void 0!==t&&(null==e||e.contains(t))&&(s.latestMatch=t)},linkClonedTemplate=({disabled:t,clone:e,latestMatch:s,sym:o,self:n})=>{if(t||!e||!s)return;const i=n.querySelector("template"),r=n.parentElement;null===r||r[o]||null===i||(r.appendChild(i.content.cloneNode(!0)),r[o]=!0)};class CssObserve extends(observeCssSelector(XtallatX(hydrate(HTMLElement)))){constructor(){super(...arguments),this.sym=Symbol(),this.customStyles="",this.propActions=[linkInsertListener,linkClosestContainer,linkLatestMatch,linkClonedTemplate]}connectedCallback(){this.style.display="none",super.connectedCallback()}insertListener(t){if(t.animationName===this.id){const e=t.target;setTimeout(()=>{this.latestOuterMatch=e},0)}}}CssObserve.is="css-observe",CssObserve.attributeProps=({observe:t,selector:e,clone:s,disabled:o,customStyles:n,latestOuterMatch:i,latestMatch:r,withinClosest:c})=>({bool:[t,o,s],obj:[i,r],notify:[r],str:[e,n,c],reflect:[t,o,s,e]}),define(CssObserve);export{CssObserve};